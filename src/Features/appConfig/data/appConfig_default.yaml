name: "Default"
version: "29/09/2025"
isDefault: true

# APP
appName: "Bimboxa"

# COLORS

colors:
  purple700: &purple700 "#7B1FA2"
  purple900: &purple900 "#4A148C"
  red300: &red300 "#E57373"
  red500: &red500 "#F44336"
  red800: &red800 "#C62828"
  red900: &red900 "#B71C1C"
  orange300: &orange300 "#FF9800"
  orange700: &orange700 "#F57C00"
  orange800: &orange800 "#EF6C00"
  yellow500: &yellow500 "#ffeb3b"
  blue800: &blue800 "#1976D2"
  blue700: &blue700 "#0288D1"
  blue500: &blue500 "#2196F3"
  blue300: &blue300 "#4FC3F7"
  green500: &green500 "#4caf50"
  green800: &green800 "#388E3C"
  green900: &green900 "#1B5E20"
  grey900: &grey900 "#212121"
  purple500: &purple500 "#9C27B0"
  deepPurple500: &deepPurple500 "#673ab7"

# STRINGS

strings:
  general:
    projectAndScope: "Périmètre des données"
    select: "Sélectionnez un dossier / lot"

  project:
    nameSingular: "Opportunité / Chantier"
    namePlural: "Opportunités / Chantiers"
    seeAll: "Tous"
    new: "Nouveau chantier / opportunité"
    create: "Créez un nouveau chantier / opportunité"
    noProject: Aucun chantier / opportunité disponible
    nameLabel: Nom du chantier / opportunité

  scope:
    dashboardTitle: "Krtos"
    nameSingular: "Krto"
    description: "Un Krto est un dossier de plans de repérage de même type."
    namePlural: "Krto"
    seeAll: "Toutes les Krtos"
    search: "Rechercher une Krto"
    new: "Nouvelle Krto"
    create: "Créez une nouvelle Krto"
    select: "Sélectionnez une Krto"
    myScopes: "Mes Krtos"
    nameLabel: "Nom du Krto"
    noScope: "Aucun Krto"

  listing:
    namePlural: "Modules"
    locatedEntities: "Annotations"

  presetConfig:
    title: "Type de dossier"
    select: "Sélectionnez un type de dossier"

# AUTH

auth:
  service: PHONE_NUMBER
  getMfaCodeUrl: https://auth.etandex.fr/api/Auth/Login
  verifyMfaCodeUrl: https://auth.etandex.fr/api/Auth/CheckMfaCode
  userProfile:
    firstName: given_name # Antoine
    lastName: familyName # Favreau
    trigram: unique_name # FVA

# REMOTE CONTAINERS

remoteContainer:
  service: "REMOTE_CONTAINER"
  name: "Serveur de sauvegarde"
  showSignInWarning: false

orgaData:
  pathRelative: "/_data/_orga"
  files:
    - key: nomenclature1
      fileName: _nomenclature_nfx-46-020_v1.json
      dataStructure: "NOMENCLATURE"
      description: "Nomenclature NFX 46-020. Objet {name,ranks,items:[{num,label,children}]}"
    - key: reportTemplate1
      fileName: SGS - Bon de commande Générique AMIANTE rev 1123.xlsx
      dataStructure: "FILE"
      description: "Bordereau d'envoi SGS pour les prélèvement"

# FEATURES

features:
  entityModels:
    keys:
      - baseMap
      - issue
      - blueprint
  bgImages:
    options:
      - key: BASIC
        url: https://public.media.bimboxa.com/bg_image_A4_150dpi_default.png
        name: "A4 - 150dpi"
        width: 1740
        height: 1240
        bbox: [70, 70, 1670, 1170]
        isDefault: true
      - key: DEFAULT
        # url: https://public.media.bimboxa.com/bg_image_A4_150dpi_etandex_wS9kwOYWr2ltTF9l2L-bu.png
        url: https://public.media.bimboxa.com/bg_image_A4_150dpi_etandex_2409wOYWr2ltTF9l2L-bu.png
        name: "A4 - 150dpi - Cartouche Etandex"
        width: 1740
        height: 1240
        bbox: [75, 215, 1600, 1100]
        textAnnotations:
          - key: projectName
            label: "Chantier"
            position: [570, 89]
            fontSize: 18
            mappedTo: projectName
          - key: projectRef
            label: "Réf. interne"
            position: [1380, 89]
            fontSize: 18
            mappedTo: projectClientRef
          - key: title
            label: "Titre"
            position: [570, 130]
            fontSize: 18
            fontWeight: "bold"
            mappedTo: blueprintTitle
          - key: authorName
            label: "Auteur"
            position: [1380, 129]
            fontSize: 18
            mappedTo: authorName
          - key: date
            label: "Date"
            position: [1380, 171]
            fontSize: 18
            mappedTo: todayS

  presetScopes:
    templatesImageUrl: https://public.media.bimboxa.com/scope_templates_etandex.gif
  annotations:
    spriteImages:
      - key: DEFAULT
        url: https://public.media.bimboxa.com/sprite_etandex_default.png
        columns: 3
        rows: 3
        tile: 64
        iconKeys:
          - circle
          - drop
          - ring
          - triangle
          - square
          - info
          - sun
          - clean
          - brush

sync:
  canSyncLocalProject: false
  canSyncLocalScope: true

# CREATION

creation:
  #canCreateProject: false
  canCreateProject: true

# DATA

# ENTITY MODEL

entityModelsObject:
  blueprint:
    key: blueprint
    name: Plan
    type: BLUEPRINT
    defaultTable: blueprints
    defaultColor: *red500
    defaultIconKey: blueprint
    defaultListingName: Exports
    strings:
      labelNew: Nouvel export
    labelKey: name
    fieldsObject:
      name:
        key: name
        type: text
        label: Nom
      image:
        key: image
        type: image
        label: Image
        options:
          maxSize: 5000

  baseMap:
    key: baseMap
    name: Fond de plan
    type: BASE_MAP
    defaultTable: baseMaps
    defaultColor: *purple700
    defaultIconKey: map
    defaultListingName: Fonds de plan
    strings:
      labelNew: Nouveau fond de plan
    labelKey: name
    fieldsObject:
      name:
        key: name
        type: text
        label: Nom
      image:
        key: image
        type: image
        label: Image
        options:
          maxSize: 5000

  legend:
    key: legend
    type: "LEGEND_ENTITY"

  annotation:
    key: annotation
    type: LOCATED_ENTITY
    defaultTable: entities
    defaultIconKey: annotation
    defaultColor: *orange300
    defaultSpriteImageKey: DEFAULT
    strings:
      labelNew: Nouvelle annotation
    labelKey: text
    fieldsObject:
      text:
        key: text
        type: text
        label: Description
        options:
          multiline: true

  annotationTemplate:
    key: annotationTemplate
    type: ANNOTATION_TEMPLATE
    defaultTable: annotationTemplates
    strings:
      labelNew: Nouvelle annotation type
    labelKey: label
    fieldsObject:
      type:
        key: type
        type: optionKey
        label: Type d'annotation
        valueOptions:
          - key: MARKER
            label: Repère

      iconKey:
        key: iconKey
        type: icon
        label: Icone
        spriteImage:
          listingKey: spriteImage
      fillColor:
        key: fillColor
        type: color
        label: Couleur
      label:
        key: label
        type: text
        label: Libellé
        options:
          showAsSection: true
          fullWidth: true

  photo:
    key: photo
    type: LOCATED_ENTITY
    name: Photo
    defaultTable: entities
    strings:
      labelNew: Nouvelle photo
    fieldsObject:
      image:
        key: image
        type: image
        label: Image
        options:
          autoFocus: true
          variant: auto
          maxSize: 200
      text:
        key: text
        type: text
        label: Description
        options:
          multiline: true
          showAsSection: true
          fullWidth: true

  issue:
    key: issue
    name: Observation
    type: LOCATED_ENTITY
    defaultTable: entities
    strings:
      labelNew: Nouvelle observation
    labelKey: text
    fieldsObject:
      text:
        key: text
        type: text
        label: Description
        options:
          multiline: true
          showAsSection: true
          fullWidth: true
      image:
        key: image
        type: image
        label: Image
        options:
          autoFocus: true
          variant: auto
          maxSize: 200
    sortBy:
      key: createdAt
      order: desc

# PRESET LISTINGS

presetListingsObject:
  mapsGeneric:
    key: mapsGeneric
    name: Fonds de plan
    entityModelKey: baseMap
    table: baseMaps
    color: *purple700
    iconKey: map
    canCreateItem: true

  annotations:
    key: annotations
    name: Annotations
    entityModelKey: annotation
    table: entities
    color: *orange300
    iconKey: annotation
    sortBy:
      key: createdAt
      order: desc
    spriteImageKey: DEFAULT
    canCreateItem: true

  issues:
    key: issues
    name: Observations
    description: "Ex: Gaine annelée NC, fissure, eau stagnante,..."
    entityModelKey: issue
    table: entities
    color: *blue700
    iconKey: info
    sortBy:
      key: num
      order: desc
    spriteImageKey: DEFAULT
    annotationTemplatesListingKey: templates-1
    canCreateItem: true

  photos:
    key: photos
    name: Photos
    description: "Localisez des photos sur le plan"
    entityModelKey: photo
    table: entities
    color: *purple700
    iconKey: photo
    comingSoon: true

  templates-1:
    key: templates-1
    name: Bibliothèque d'annotations
    entityModelKey: annotationTemplate
    table: annotationTemplates
    color: *blue700
    iconKey: legend
    spriteImageKey: DEFAULT
    initialEntities:
      sortedItems:
        - type: MARKER
          iconKey: ring
          fillColor: *red500
          label: Gaine annelée NC
        - type: MARKER
          iconKey: square
          fillColor: *green500
          label: Réservation NC
        - type: MARKER
          iconKey: drop
          fillColor: *blue500
          label: Présence d'eau stagnante
        - type: MARKER
          iconKey: triangle
          fillColor: *deepPurple500
          label: Support à poncer
        - type: MARKER
          iconKey: triangle
          fillColor: *purple500
          label: Fissure

  blueprints:
    key: blueprints
    name: Exports
    entityModelKey: blueprint
    table: blueprints
    color: *red500
    iconKey: blueprint
    canCreateItem: true

# PRESET SCOPES

presetScopesSortedKeys:
  - reception
  - other

presetScopesObject:
  pic:
    key: pic
    name: "PIC"
    description: "Plan d'installations de chantier"

  reception:
    key: reception
    name: Réception de support
    description: Localisez des écarts avec des pastilles.
    descriptionImageUrl: https://public.media.bimboxa.com/scope_template_etandex_reception_support.png
    listings:
      - issues
      - photos

  visit:
    key: visit
    name: Visite
    description: Enregistrez vos observations au cours d'une visite
    descriptionImageUrl: https://public.media.bimboxa.com/scope_template_etandex_reperage_libre.png
    listings:
      - issues

  other:
    key: other
    name: Autre
    description: Autre type de plan de repérage
    descriptionImageUrl: https://public.media.bimboxa.com/scope_template_etandex_vide.png

# REPORT TABLES

tables:
  materialCategories:
    name: "Nomenclature de matériaux"
    description: "Tableau de la nomenclature des matériaux"
    type: "NOMENCLATURE_BASED"
    categoryKeyLabel:
      # - key: "num"
      #   label: "N°"
      # - key: "label"
      #   label: "Nom"
      - key: "code"
        label: "Code"

  sampleMaterialZone:
    name: "Prélèvement - Matériau - Pièce"
    description: "Tableau des prélèvements (Prélevement | Matériau | Pièce)"
    type: "ENTITIES_BASED"
    columns:
      - key: num
        label: N°
        description: "Numéro du prélèvement"
        value:
          type: "ENTITY_PROP"
          entityFieldKey: num
      - key: material
        label: Matériau
        description: "Matériau prélevé"
        value:
          type: "ENTITY_PROP"
          entityFieldKey: material
          entityFieldValue: fullLabelWithCategory
      - key: zone
        label: Pièce
        description: "Pièce où le prélèvement a été effectué"
        value:
          type: "ENTITY_PROP"
          entityFieldKey: zone
          entityFieldValue: fullName

  orderSamples:
    name: "Echantillons (commandes)"
    description: "Tableau d'échantillons pour les commandes"
    type: "ENTITIES_PROPS_BASED"
    columns:
      - key: num
        label: N°
        description: N° du prélèvement
        value:
          type: "ENTITY_PROP"
          entityFieldKey: num
      - key: description
        label: Description
        description: "Catégorie + Ouvrages ou Composants de la construction + Partie d'ouvrages ou de composants à inspecter + descriptif technicien"
        value:
          type: "ENTITY_PROP"
          entityFieldKey: material
          entityFieldValue: fullNameWithCategory

# REPORTS

reports:
  laboOrderReport:
    strings:
      createTitle: "Nouveau bordereau d'envoi"
    name: "Bordereau d'envoi"
    type: "EXCEL"
    options:
      - key: "SGS"
        label: "Labo SGS"
        templateKey: "reportTemplate1"
      - key: "MY_EASY_LAB"
        label: "My Easy Lab"
        templateKey: "reportTemplate2"
